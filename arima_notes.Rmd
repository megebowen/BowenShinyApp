---
title: "arima_notes"
author: "Meghan Bowen"
date: "2/20/2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r load_packages}

library(tidyverse)
library(knitr)
library(lubridate)
library(tseries)
library(forecast)

```


```{r load_data}

channel_vis_year <- read_csv("~/github/BowenShinyApp/Visitation_Data/channel_vis_year.csv") %>% 
  select(Year, RecreationVisitors)

arches_vis_year <- read_csv("~/github/BowenShinyApp/Visitation_data/arches_vis_year.csv")
arches_vis_year <- arches_vis_year[-1,]
colnames(arches_vis_year) <- arches_vis_year[1,]
arches_vis_year <- arches_vis_year[-1,]

#Explore yearly data

plot(channel_vis_year)
ggplot(arches_vis_year, aes(x=Year, y=RecreationVisitors))+
  geom_point()


```

```{r clean_month}
##Need to clean the monthly data and make into tidy format

channel_vis_month <- read_csv("~/github/BowenShinyApp/Visitation_Data/channel_vis_month.csv") %>% 
  select(-Textbox5)
channel_vis_month$Year <- as.factor(channel_vis_month$Year)
channel_vis_month <-as.data.frame(channel_vis_month) #don't know if this is necessary atm

gather_up <- gather(channel_vis_month, key = "Month", value = "VisitorCount", JAN:DEC) %>% 
  unite(Year_Month, c(Year, Month), remove = T)

gather_plot <- ggplot(gather_up, aes(x=Year_Month, y=VisitorCount)) +
  geom_point()

gather_plot
```

```{r check_arima_assumptions}
#convert to timeseries data
ex_ts <- ts(gather_up$VisitorCount, frequency = 12, start = c(1979,1))

ex_ts <- na.remove(ex_ts)

plot(ex_ts)

#check decomposition
ex_decomp <- decompose(ex_ts)
plot(ex_decomp)

#check ACF
ex_acf <- acf(ex_ts)

```


